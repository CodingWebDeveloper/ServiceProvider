@page "/service-info/{ServiceId:int}"

<style>
    .slideshow-container {
        width: 527px;
        height: 427px;
        position: relative;
    }

    .small-packages-container{

    }

    .package-heading {
        color: darkgray;
        font-size: 18px;
        font-weight: bold;
        border: 1.5px solid #c3c3c3;
    }

    .package-heading:hover{
       cursor:pointer;
       border-bottom:4px solid limegreen;
    }


    .slides {
        display: none;
        overflow: hidden;
        width:527px;
        height: 540px;
    }

    .prev, .next {
        cursor: pointer;
        color: black;
        position: absolute;
        background-color: white;
        top: 50%;
        border-radius: 50%;
        box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
    }

    .prev:hover, .next:hover{
        transform:scale(1.05);
        transition: transform 0.6s ease-out;
    }
    .next {
        right: -20px;
    }

    .prev{
        left: -20px;
    }

    .dot {
        cursor: pointer;
        height: 15px;
        width: 15px;
        margin: 0 2px;
        background-color: #bbb;
        border-radius: 50%;
        display: inline-block;
        transition: background-color 0.6s ease;
    }

        .active, .dot:hover {
            background-color: #717171;
        }

        .checked{
            color:orange;
        }

        .vl{
            border-left: 3px solid darkgray;
            opacity: 0.5;
            height:20px;
        }

        .user-item{
            display:flex;
            flex-direction:row;
        }

    .img {
        height: 427px;
        width: 527px;
    }



    .img:hover{
       transform:scale(1.02);
       transition: transform 350ms ease-in-out;
       cursor:pointer;
    }

    @@media only screen and (max-width: 700px) {
        .slideshow-container {
            max-width: 500px;
        }

        .img {
            width: 500px;
            height: 450px;
        }
    }
        @@media only screen and (max-width:600px){
            .user-item{
                display:flex;
                flex-direction:column;
            }

            .vl{
                display:none;
            }

            .slideshow-container{
                max-width:300px;
            }

            .img{
                width:300px;
                height: 350px;
            }
        }

    h3 {
        font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
        font-weight: bold;
    }

    .text {
        font-family: 'Lucida Sans Unicode';
    }

    .package-body{
        display:none;
    }

    .view-package{

    }

    .btn-contact-me {
        color: #717171;
    }

    .btn-contact-me:hover{
        color:white;
        transform: scale(1.05);
        background:#717171;
        transition: background 350ms ease-out transform 350ms ease-out;
    }

    .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        padding-top: 10px;
        padding-bottom: 10px;
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.3); /* Black w/ opacity */
    }


    /* Modal Content (image) */
    .modal-content {
        margin: auto;
        display: block;
        height: 100%;
        width: 80%;
        max-width: 700px;
    }


    /* Caption of Modal Image */
    #caption {
        margin: auto;
        display: block;
        width: 80%;
        max-width: 700px;
        text-align: center;
        color: #ccc;
        padding: 10px 0;
        height: 150px;
    }

    /* Add Animation */
    .modal-content, #caption {
        -webkit-animation-name: zoom;
        -webkit-animation-duration: 0.6s;
        animation-name: zoom;
        animation-duration: 0.6s;
    }

    .modal-content, #caption {
    -webkit-animation-name: zoom;
    -webkit-animation-duration: 0.6s;
    animation-name: zoom;
    animation-duration: 0.6s;
}

@@-webkit-keyframes zoom {
    from {
        -webkit-transform: scale(0)
    }

    to {
        -webkit-transform: scale(1)
    }
}

@@keyframes zoom {
    from {
        transform: scale(0)
    }

    to {
        transform: scale(1)
    }
}

    .close {
        position: absolute;
        top: 15px;
        right: 35px;
        color: #f1f1f1;
        font-size: 40px;
        font-weight: bold;
        transition: 0.3s;
    }

        .close:hover,
        .close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

    

    @@media only screen and (max-width: 700px) {
    .modal-content {
        width: 100%;
        }
    }
</style>
<h3 style="width:30rem;">@this.service.Title</h3>

<div class="d-flex flex-column justify-content-start my-3">
    <div class="user-item d-flex align-items-center">
        @if (!(this.service.Creator is null))
        {
            @if (string.IsNullOrEmpty(this.service.Creator.ProfilePictureUrl))
            {
                <div class="d-flex justify-content-center align-items-center bg-secondary rounded-circle text-white mx-3 p-3" style="height:20px; width:20px;">
                    <span>@this.service.Creator.UserName.Substring(0, 1)</span>
                </div>
            }
            else
            {
                <img class="rounded-circle mx-3 p-4" height="20" width="20" src="@this.service.Creator.ProfilePictureUrl" alt="profile picture" />
            }
            <strong class="mx-1 text">@this.service.Creator.UserName</strong>
            <div class="vl"></div>
            <div class="mx-1 d-inline-flex align-items-center">
                @for (int i = 1; i <= 5; i++)
                {
                    if (this.service.Rating != 0)
                    {
                        if (i != this.service.Rating || this.service.Rating == 5)
                        {
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill checked" viewBox="0 0 16 16">
                                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                            </svg>
                        }
                        else
                        {
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                            </svg>
                        }
                    }
                    else
                    {
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                            <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                        </svg>
                    }
                }
                <div class="mx-1 d-inline-flex" style="font-size:16px;">
                    <div style="color:orange">
                        @this.service.Rating
                    </div>
                    <div>(@this.service.ReviewsCount)</div>
                </div>
            </div>
            <div class="vl"></div>
            <div class="mx-1 text ">
                @this.service.CurrentPendingOrdersCount Orders in Queue
            </div>
            <div class="vl"></div>
        }
    </div>

    @if (!(this.service.Images is null))
    {
        if (this.service.Images.Any())
        {
            <div class="my-3">
                <div class="slideshow-container">
                    @foreach (var image in this.service.Images)
                    {
                        <div class="slides">
                            <img id="@image.Id" onclick="showMyImage(@image.Id)" class="img" src="@image.RemoteUrl" alt="SlideImage" />
                        </div>
                    }
                    <svg onclick="plusSlides(-1)" xmlns="http://www.w3.org/2000/svg" width="40" height="40" class="prev" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                    <svg onclick="plusSlides(1)" xmlns="http://www.w3.org/2000/svg" width="40" height="40" class="next" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                </div>
            </div>
        }
    }

    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content responisve" id="img01">
        <div id="caption"></div>
    </div>

    <div class="my-3">
        <div class="d-flex my-5">
            <h3 class="flex-grow-1">What people loved about this provider</h3>
            <a>See all reviews</a>
        </div>
        <div class="d-flex justify-content-center align-items-center">
            @if (!(this.service.Reviews is null))
            {
                if (this.service.Reviews.Any())
                {
                    @*<div class="slideshow-container">
                            <div class="slides">
                                @foreach (var review in this.service.Reviews?.OrderByDescending(c => c.Rate).Take(5))
                                {
                                    <div style="box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;">
                                        <div class="d-flex">
                                            @if (string.IsNullOrEmpty(review.CreatorProfilePicture))
                                            {
                                                <div class="d-flex justify-content-center align-items-center bg-secondary text-white mx-3">
                                                    <span>@review.CreatorUserName.Take(1)</span>
                                                </div>

                                            }
                                            else
                                            {
                                                <img src="@review.CreatorProfilePicture" alt="Profile picture" />
                                            }
                                            <strong>@review.CreatorUserName</strong>
                                            <p>
                                                <svg style="background-color:yellow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill mx-1" viewBox="0 0 16 16">
                                                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                                                </svg>
                                                @review.Rate
                                            </p>
                                        </div>
                                        <div style="word-break:normal; width: 2vh;">
                                            <p>@review.Content</p>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>*@
                }
                else
                {
                    <div class="d-flex flex-fill rounded p-5 justify-content-center align-items-center" style="background:#c3c3c3; font-weight: bold;color:white; ">
                        <div class="border-dark ">
                            <h4 class="m-2">No top reviews</h4>
                        </div>
                    </div>

                }
            }
        </div>
    </div>
    <div>
        <h3 class="my-5">About this Service</h3>
        <p class="text" style="word-break:normal; width: auto; max-width:30rem;">
            @this.service.Description
        </p>
    </div>

    <h3 class="my-3">Provider of this Service</h3>
    @if (!(this.service.Creator is null))
    {
        <div class="d-flex">
            <div>
                @if (string.IsNullOrEmpty(this.service.Creator.ProfilePictureUrl))
                {
                    <div class="d-flex justify-content-center align-items-center bg-secondary rounded-circle text-white mx-3 p-5" style="height:20px; width:20px;">
                        <span>@this.service.Creator.UserName.Substring(0, 1)</span>
                    </div>
                }
                else
                {
                }
            </div>
            <div>
                <p>@this.service.Creator.UserName</p>
                <p class="my-2">Reviews: (@this.service.Creator.CountOfReviews)</p>
                <button class="btn btn-outline-secondary btn-contact-me">Contact Me</button>
            </div>
        </div>

        <div style="width: 500px; margin-top:2rem;box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;">
            <div class="d-inline-flex">
                <div class="d-inline-block mx-4">
                    <div>
                        <h6 class="text-black-50">From</h6>
                        <p>
                            Country
                        </p>
                    </div>
                    <div>
                        <h6 class="text-black-50">Avg. response time</h6>
                        <p>
                            (time)
                        </p>
                    </div>
                </div>
                <div class="d-inline-block mx-4">
                    <div>
                        <h6 class="text-black-50">Member since</h6>
                        <p>
                            @this.service.Creator.CreatedOn.ToString("MMM yyyy")
                        </p>
                    </div>
                    <div>
                        <h6 class="text-black-50">Last delivery</h6>
                        <p>
                            about (time)
                        </p>
                    </div>
                </div>
            </div>
            <hr />
            <p class="mx-4">
                Description about provider
            </p>
        </div>
    }


    <div class="my-3">
        @if (!(this.service.Packages is null))
        {
            if (this.service.Packages.Any())
            {
                <div class="d-flex">
                    @foreach (var package in this.service.Packages)
                    {
                        <div>
                            <div onclick="openPackage(@package.PackageType)" class="d-flex justify-content-center align-items-center px-5 py-3 package-heading my-3 view-package" id="test-package">
                                @package.PackageType
                            </div>
                            <div class="my-3 mx-2 package-body" id="@package.PackageType">
                                <h3 class="my-3">@package.Title</h3>
                                <p style="word-break:normal; margin-bottom:3rem; width:auto" class="text">@package.Details</p>

                                <div class="d-flex align-items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
                                        <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z" />
                                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z" />
                                    </svg>
                                    <span class="mx-2 text">@package.DeliveryDays Days Delivery</span>
                                </div>
                                <div>
                                    @foreach (var material in package.Materials)
                                    {
                                        <div class="d-flex align-items-center">
                                            <svg style="color:limegreen" xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                                <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
                                            </svg>
                                            <span class="text">@material.Name</span>
                                        </div>
                                    }
                                </div>
                                <button class="mx-2 btn rounded p-3 bg-success text-white">Continue ($@package.Price)</button>
                            </div>
                        </div>
                    }
                </div>
            }

        }
    </div>

    @if (!(this.service.Requirements is null))
    {
        if (this.service.Requirements.Any())
        {
            <h3 class="my-5">Requirements</h3>
            int count = 1;
            @foreach (var requirement in this.service.Requirements)
            {
                <div>
                    <span>#@(count++)</span>
                    <hr />
                    <div class="p-3">
                        <p class="text" style="font-size: 20px;">
                            @requirement.Content
                        </p>
                    </div>
                    <hr />
                </div>
            }
        }
    }

    <h3 class="my-5">All Reviews</h3>
    @if (!(this.service.Reviews is null))
    {
        <div class="d-flex flex-column justify-content-start">
            @foreach (var review in this.service.Reviews)
            {
                <div style="box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;" class="position-relative">
                    <div class="d-flex justify-content-start align-items-center">
                        @if (string.IsNullOrEmpty(review.CreatorProfilePicture))
                        {
                            <div class="d-flex justify-content-center align-items-center bg-secondary rounded-circle text-white m-2 p-3" style="height:26px; width:26px;">
                                <span>@review.CreatorUserName.Substring(0, 1)</span>
                            </div>

                        }
                        else
                        {
                            <img class="m-2 rounded-circle p-3" width="26" height="26" src="@review.CreatorProfilePicture" alt="Profile picture" />
                        }
                        <strong>@review.CreatorUserName</strong>
                        <div class="mx-1 d-inline-flex align-items-center">
                            <div class="mx-1">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-star-fill checked" viewBox="0 0 16 16">
                                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                                </svg>
                            </div>
                            <div class="mx-1" style="color:orange; font-size:18px;">@review.Rate</div>
                        </div>
                    </div>
                    <hr />
                    <div class="position-relative">
                        <p style="word-break:normal; width: auto;" class="mx-3 text">@review.Content</p>
                    </div>
                </div>
            }
        </div>
    }
</div>


    @* Other services from Creator *@

    @* Z-index Packages Container *@


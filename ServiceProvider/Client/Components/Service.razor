@page "/service-info/{ServiceId:int}"

<style>
    .slideshow-container {
        max-width: 800px;
        position: relative;
    }

    .small-packages-container{

    }

    .package-heading {
        color: darkgray;
        font-size: 18px;
        font-weight: bold;
        border: 1.5px solid #c3c3c3;
    }

    .package-heading:hover{
       cursor:pointer;
       border-bottom:4px solid limegreen;
    }


    .slides {
        display: none;
    }

    .prev, .next {
        cursor:pointer;
        color:black;
        position:absolute;
        background-color:white;
        color:darkgray;
        top:50%;
        border-radius:50%;
    }

    .prev:hover, .next:hover{
        transform:scale(1.05);
        transition: transform 0.6s ease-out;
    }
    .next {
        right: 5px;
    }

    .prev{
        left: 5px;
    }

    .dot {
        cursor: pointer;
        height: 15px;
        width: 15px;
        margin: 0 2px;
        background-color: #bbb;
        border-radius: 50%;
        display: inline-block;
        transition: background-color 0.6s ease;
    }

        .active, .dot:hover {
            background-color: #717171;
        }

        .checked{
            color:orange;
        }
</style>
<h3>@this.service.Title</h3>

<div class="d-flex flex-column justify-content-start my-3">
    <div class="d-flex">
        @*@if (string.IsNullOrEmpty(this.service.Creator.ProfilePictureUrl))
            {
                <div class="d-flex justify-content-center align-items-center bg-secondary text-white mx-3">
                    <span>@this.service.Creator.UserName.Take(1)</span>
                </div>
            }
            else
            {
                <img src="@this.service.Creator.ProfilePictureUrl" alt="profile picture" />
            }*@
        @*<p>@this.service.User.UserName</p>*@
        @*<p>
                Rating: @this.service.Rating (263)
            </p>
            <p>
                @this.service.CurrentPendingOrdersCount Orders in Queue
            </p>*@
    </div>

    <div class="my-3">
        @if (!(this.service.Images is null))
        {
            <div class="slideshow-container">
                @foreach (var image in this.service.Images)
                {
                    <div class="slides">
                        <img style="width: 800px; height:500px; max-height:500px" src="@image.RemoteUrl" alt="SlideImage" />
                    </div>
                }
                <svg onclick="plusSlides(-1)" xmlns="http://www.w3.org/2000/svg" width="45" height="45" class="prev" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                <svg onclick="plusSlides(1)" xmlns="http://www.w3.org/2000/svg" width="45" height="45" class="next" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                </svg>
            </div>
        }
    </div>


    <div class="my-3">
        <div class="d-flex my-3 ">
            <h3 class="flex-grow-1">What people loved about this provider</h3>
            <a>See all reviews</a>
        </div>
        <div class="d-flex justify-content-center align-items-center">
            @if (!(this.service.Reviews is null))
            {
                @*<div class="slideshow-container">
                        <div class="slides">
                            @foreach (var review in this.service.Reviews?.OrderByDescending(c => c.Rate).Take(5))
                            {
                                <div style="box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;">
                                    <div class="d-flex">
                                        @if (string.IsNullOrEmpty(review.CreatorProfilePicture))
                                        {
                                            <div class="d-flex justify-content-center align-items-center bg-secondary text-white mx-3">
                                                <span>@review.CreatorUserName.Take(1)</span>
                                            </div>

                                        }
                                        else
                                        {
                                            <img src="@review.CreatorProfilePicture" alt="Profile picture" />
                                        }
                                        <strong>@review.CreatorUserName</strong>
                                        <p>
                                            <svg style="background-color:yellow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill mx-1" viewBox="0 0 16 16">
                                                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                                            </svg>
                                            @review.Rate
                                        </p>
                                    </div>
                                    <div style="word-break:normal; width: 2vh;">
                                        <p>@review.Content</p>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>*@
            }
            else
            {
                <div class="d-flex flex-fill rounded p-5 justify-content-center align-items-center" style="background:#c3c3c3; font-weight: bold;color:white; ">
                    <div class="border-dark ">
                        <h4 class="m-2">No reviews</h4>
                    </div>
                </div>

            }
        </div>
    </div>
    <div style="word-break:normal; width: 30rem">
        <h3>About this Service</h3>
        <p>
            @this.service.Description
        </p>
    </div>


    <div class="my-3">
        @if (!(this.service.Packages is null))
        {
            <div class="d-flex">
                @foreach (var package in this.service.Packages)
                {
                    <div>
                        <div class="d-flex justify-content-center align-items-center px-5 py-3 package-heading my-3">
                            @package.PackageType
                        </div>
                        <div class="my-3">
                            <h3 class="my-3">@package.Title</h3>

                            <p style="width; word-break:normal; margin-bottom:3rem">@package.Details</p>

                            <div class="d-flex">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
                                    <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z" />
                                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z" />
                                </svg>
                                <span class="mx-2">@package.DeliveryDays Delivery</span>
                            </div>
                            <div>
                                @foreach (var material in package.Materials)
                                {
                                    <div class="d-flex align-items-center">
                                        <svg style="color:limegreen" xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                            <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
                                        </svg>
                                        <span>@material.Name</span>
                                    </div>
                                }
                            </div>
                        </div>
                        <button class="d-flex flex-fill justify-content-center align-items-center rounded p-1 bg-success text-white">Continue ($@package.Price)</button>
                    </div>
                }
            </div>
        }

    </div>
    <h3>All Reviews</h3>
    <div class="d-flex flex-column justify-content-start">
        @if (!(this.service.Reviews is null))
            @foreach (var review in this.service.Reviews)
            {
                <div style="box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;">
                    <div class="d-flex justify-content-start align-items-center">
                        @if (string.IsNullOrEmpty(review.CreatorProfilePicture))
                        {
                            <div class="d-flex justify-content-center align-items-center bg-secondary rounded-circle text-white m-3 p-4" style="height:26px; width:26px;">
                                <span>@review.CreatorUserName.Substring(0, 1)</span>
                            </div>

                        }
                        else
                        {
                            <img class="m-3 rounded-circle p-4" width="26" height="26" src="@review.CreatorProfilePicture" alt="Profile picture" />
                        }
                        <strong>@review.CreatorUserName</strong>
                        <div class="d-flex mx-2">
                            @for (int i = 1; i <= 5; i++)
                            {
                                <div class="mx-1">
                                    @if (i != review.Rate)
                                    {
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-star-fill checked" viewBox="0 0 16 16">
                                            <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                                        </svg>
                                    }
                                    else
                                    {
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                                            <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                                        </svg>
                                    }
                                </div>
                            }
                        </div>
                    </div>
                    <hr />

                    <div style="word-break:normal; width: 30rem;">
                        <p class="m-3">@review.Content</p>
                    </div>
                </div>
            }
    </div>

</div>



    @* Creator View *@

    @* Packages *@

    @* Requirements *@

    @* All Reviews *@

    @* Other services from Creator *@

    @* Z-index Packages Container *@

